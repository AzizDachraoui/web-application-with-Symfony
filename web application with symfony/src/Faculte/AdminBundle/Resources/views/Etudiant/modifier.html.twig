{% extends "FaculteAdminBundle::layout.html.twig"%}

{% block content %}
    <div class="page-content">
        <!-- BEGIN BREADCRUMBS -->
        <div class="breadcrumbs">
            <ol class="breadcrumb">
                <li>
                    <a href="{{ path('faculte_admin_homepage') }}">Accueil</a>
                </li>
                <li>
                    <a href="{{ path('faculte_admin_etudiants') }}"  >liste des étudiants</a>
                </li>
                <li class="active">MModifier les informations de l'étudiant</li>
            </ol>
        </div>
        <!-- END BREADCRUMBS -->
        <!-- BEGIN PAGE BASE CONTENT -->
        <div class="row">
            <div class="col-md-12">
                <!-- BEGIN PORTLET-->
                <div class="portlet light form-fit bordered">
                    <div class="portlet-title">
                        <div class="caption">
                            <i class="fa fa-edit font-green  "></i>
                            <span class="caption-subject font-green ">Formulaire de modification</span>
                        </div>
                    </div>
                    <!-- BEGIN SAMPLE FORM PORTLET-->

                    <div class="portlet-body form ">
                        <form class="form-horizontal" action="{{ path('faculte_admin_modifier_etudiant',{'idE':Etudiant.id}) }}"  method="POST" role="form">
                            <div class="form-body col-md-9">
                                <div class="form-group">
                                    <div class="col-md-12 text-center" style="color:red;"><b>
                                            {{ form_errors(form) }}
                                            {{ form_errors(form2) }}
                                            {% if errorUsername is defined  %}
                                                {{ errorUsername }}
                                            {% endif %}
                                            {% if errorEmail is defined  %}
                                                {{ errorEmail }}
                                            {% endif %}</b>
                                    </div>
                                </div>
                                <div class="form-group form-md-line-input has-error">
                                    {{ form_label(form2.username,null, {'label_attr': {'class': 'col-md-3 control-label'} }) }}</label>
                                    <div class="col-md-9">
                                        {{ form_widget(form2.username,{'attr': {'class': 'form-control','placeholder':'Login' }} ) }}
                                        <div class="form-control-focus"> </div>
                                    </div>
                                </div>
                                <div class="form-group form-md-line-input has-error">
                                    {{ form_label(form2.email,null, {'label_attr': {'class': 'col-md-3 control-label'} }) }}</label>
                                    <div class="col-md-9">
                                        {{ form_widget(form2.email,{'attr': {'class': 'form-control','placeholder':'Email' }} ) }}
                                        <div class="form-control-focus"> </div>
                                    </div>
                                </div>
                                <div class="form-group form-md-line-input has-error">
                                    {{ form_label(form.CIN,null, {'label_attr': {'class': 'col-md-3 control-label'} }) }}</label>
                                    <div class="col-md-9">
                                        {{ form_widget(form.CIN,{'attr': {'class': 'form-control','placeholder':'CIN' }} ) }}
                                        <div class="form-control-focus"> </div>
                                    </div>
                                </div>
                                <div class="form-group form-md-line-input has-error">
                                    {{ form_label(form.nom,null, {'label_attr': {'class': 'col-md-3 control-label'} }) }}</label>
                                    <div class="col-md-9">
                                        {{ form_widget(form.nom,{'attr': {'class': 'form-control','placeholder':'Nom' }} ) }}
                                        <div class="form-control-focus"> </div>
                                    </div>
                                </div>
                                <div class="form-group form-md-line-input has-error">
                                    {{ form_label(form.prenom,null, {'label_attr': {'class': 'col-md-3 control-label'} }) }}</label>
                                    <div class="col-md-9">
                                        {{ form_widget(form.prenom,{'attr': {'class': 'form-control','placeholder':'Prénom' }} ) }}
                                        <div class="form-control-focus"> </div>
                                    </div>
                                </div>
                                <div class="form-group form-md-line-input has-error">
                                    {{ form_label(form.lieuNaissance,null, {'label_attr': {'class': 'col-md-3 control-label'} }) }}</label>
                                    <div class="col-md-9">
                                        {{ form_widget(form.lieuNaissance,{'attr': {'class': 'form-control','placeholder':'lieu de Naissance' }} ) }}
                                        <div class="form-control-focus"> </div>
                                    </div>
                                </div>

                                <div class="form-group form-md-line-input has-error">
                                    {{ form_label(form.sexe,null, {'label_attr': {'class': 'col-md-3 control-label'} }) }}</label>
                                    <div class="col-md-9">
                                        {{ form_widget(form.sexe,{'attr': {'class': 'form-control','placeholder':'Sexe' }} ) }}
                                    </div>
                                </div>
                                <div class="form-group form-md-line-input has-error">
                                    {{ form_label(form.adresse,null, {'label_attr': {'class': 'col-md-3 control-label'} }) }}</label>
                                    <div class="col-md-9">
                                        {{ form_widget(form.adresse,{'attr': {'class': 'form-control','placeholder':'Adresse' }} ) }}
                                    </div>
                                </div>
                                <div class="form-group form-md-line-input has-error">
                                    {{ form_label(form.nationalite,null, {'label_attr': {'class': 'col-md-3 control-label'} }) }}</label>
                                    <div class="col-md-9">
                                        {{ form_widget(form.nationalite,{'attr': {'class': 'form-control','placeholder':'Nationalite' }} ) }}
                                    </div>
                                </div>
                                <div class="form-group form-md-line-input has-error">
                                    {{ form_label(form.telephone,null, {'label_attr': {'class': 'col-md-3 control-label'} }) }}</label>
                                    <div class="col-md-9">
                                        {{ form_widget(form.telephone,{'attr': {'class': 'form-control','placeholder':'Téléphone' }} ) }}
                                    </div>
                                </div>
                                <div class="form-group form-md-line-input has-error">
                                    {{ form_label(form.dateNaissance,null, {'label_attr': {'class': 'col-md-3 control-label'} }) }}</label>
                                    <div class="col-md-9">
                                        {{ form_widget(form.dateNaissance) }}
                                    </div>
                                </div>
                                <div class="form-group form-md-line-input has-error">
                                    {{ form_label(form.filiere,null, {'label_attr': {'class': 'col-md-3 control-label'} }) }}</label>
                                    <div class="col-md-9">
                                        {{ form_widget(form.filiere,{'attr': {'class': 'form-control','placeholder':'Nom de Filiere' }} ) }}
                                    </div>
                                </div>
                                <div class="form-group form-md-line-input has-error">
                                    {{ form_label(form.niveau, null, {'label_attr': {'class': 'col-md-3 control-label'} }) }}
                                    <div class="col-md-9" id="select_niveau">
                                        {{ form_widget(form.niveau,{'attr': {'class': 'form-control' }} ) }}
                                    </div>
                                </div>
                                <div class="form-group form-md-line-input has-error">
                                    {{ form_label(form.groupe,null, {'label_attr': {'class': 'col-md-3 control-label'} }) }}
                                    <div class="col-md-9" id="select_groupe">
                                        {{ form_widget(form.groupe,{'attr': {'class': 'form-control' }} ) }}
                                    </div>
                                </div>
                                {{ form_rest(form) }}
                                {{ form_rest(form2) }}
                            </div>
                            <div class="form-actions ">
                                <div class="col-md-offset-3 col-md-9">
                                   <span class="label label-mn label-green">
                                    <button type="submit" class="btn green"> <i class="fa fa-pencil font-white"> Mettre à jour</i></button></span>
                                    <button type="button" class="btn default"  onclick='location.href="{{ path('faculte_admin_etudiants') }}"'>Annuler</button>
                                </div>
                            </div>
                        </form>
                    </div>

                    <!-- END SAMPLE FORM PORTLET-->
                </div>
                <!-- END PORTLET-->
            </div>
        </div>
        <!-- END PAGE BASE CONTENT -->
    </div>
{% endblock %}

{% block js %}
    <script type="text/javascript">
        $(document).ready(function () {
            $("#faculte_adminbundle_etudiant_filiere").change(function () {
                var idfiliere = $(this).val();
                var dataString = {idfiliere: idfiliere};
                $.ajax
                ({
                    type: "POST",
                    url: "{{ path('faculte_admin_render_niveau_etudiant') }}",
                    data: dataString,
                    success: function (response) {
                        $("#select_niveau").html(response);
                    }
                });
            });

        var idfiliere = {{Etudiant.Groupe.niveau.filiere.id }} ;
        var idEtudiant = {{Etudiant.id }} ;

        $("#faculte_adminbundle_etudiant_filiere > option[value *= '"+idfiliere+"']").attr("selected",true);

        var idfiliere = $("#faculte_adminbundle_etudiant_filiere").val();
        var dataString = { idfiliere:idfiliere,idEtudiant:idEtudiant };
        $.ajax
        ({
            type: "POST",
            url: "{{path('faculte_admin_render_niveau_etudiant')}}",
            data: dataString,
            success: function(response)
            {
                $("#select_niveau").html(response);
            }
        });

        });
    </script>
{% endblock %}